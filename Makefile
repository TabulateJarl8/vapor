.PHONY: test test-cov lint format clean check-all

test:
	uv run pytest . --numprocesses auto

test-cov:
	 uv run pytest . --numprocesses auto --cov=vapor --cov-report=term-missing --cov-report=xml

format:
	uv run ruff format .

lint:
	uv run ruff check .

clean:
	find . -type d -name "__pycache__" -exec rm -rfv "{}" +
	rm -rfv .mypy_cache .pytest_cache .ruff_cache dist htmlcov
	rm -fv .coverage coverage.xml

check-all: test-cov lint
	uv run mypy .
	uv run ruff format . --check
